Ниже представлено описание и примеры запросов к API и методов, которыми они реализованы. В примерах указаны только обязательные аргументы методов. Остальные аргументы описаны в статьях о соответствующих запросах технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/all-methods.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/all-methods.html).

Ссылки на статьи приведены в описаниях методов.

# Базовые методы

Методы клиента `BaseClient` возвращают информацию о магазинах на Маркете.

```php
$baseClient = new \Yandex\Market\Partner\Clients\BaseClient($clientId, $token);
```

## Магазины пользователя

Метод `getCampaigns` возвращает список магазинов, к которым имеет доступ пользователь — владелец используемого авторизационного токена. Для агентских пользователей список состоит из подагентских магазинов.

```php
// Получаем объект с магазинами
$campaignsObject = $baseClient->getCampaigns();
// Получаем итератор по магазинам
$campaigns = $campaignsObject->getCampaigns();
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns.html).

## Информация о магазине

Метод `getCampaign` возвращает информацию о магазине.

```php
// Получаем информацию о магазине
$campaign = $baseClient->getCampaign(10001);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id.html).

## Логины, связанные с магазином

Метод `getCampaignLogins` возвращает список логинов, у которых есть доступ к магазину.

```php
// Получаем список логинов
$logins = $baseClient->getCampaignLogins(10001);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-logins.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-logins.html).

## Магазины, доступные логину

Метод `getCampaignsByLogin` возвращает список магазинов, к которым у логина есть доступ.

```php
// Получаем итератор по магазинам, к которым имеет доступ логин
$campaigns = $baseClient->getCampaignsByLogin('nuf-nuf');
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-by-login.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-by-login.html).

## Настройки магазина

Метод `getCampaignSettings` возвращает информацию о настройках магазина.

```php
// Получаем настройки магазина
$campaignSettings = $baseClient->getCampaignSettings(10001);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-settings.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-settings.html).

# Настройки размещения

Методы клиента `CampaignRegionClient` возвращают информацию о настройках размещения магазинов на Маркете.

```php
$campaignRegionClient = new \Yandex\Market\Partner\Clients\CampaignRegionClient($clientId, $token);
```

## Регион магазина

Метод `getCampaigns` возвращает регион, в котором находится магазин.

```php
// Получаем регион магазина
$campaignRegion = $campaignRegionClient->getRegion(10001);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-region.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-region.html).

# Отзывы

Методы клиента `FeedbackClient` возвращают отзывы покупателей на Маркете.

```php
$feedbackClient = new \Yandex\Market\Partner\Clients\FeedbackClient($clientId, $token);
```

## Новые и обновленные отзывы о магазине

Метод `getFeedback` возвращает новые и обновленные отзывы о магазине на Маркете.

```php
/* Рекурсивная функция для печати переписки автора отзыва 
   с магазином. Объект ответа может содержать дочерние ответы */
function echoComment($comment, $level = 0) {
    $tabs = str_repeat("\t", $level);
    echo $tabs . $comment->getAuthor() . ": " . $comment->getBody();    
    $childrenComments = $comment->getChildren();
    foreach ($childrenComments as $childrenComment) {
        echoComment($childrenComment, $level + 1);
    }        

// Получаем объект с отзывами о магазине
$getFeedback = $feedbackClient->getFeedback(10774)->getResult();
// Получаем итератор по отзывам
$feedbackList = $result->getFeedbackList();
// Печатаем информацию об отзывах
foreach ($feedbackList as $feedback) { 
    echo "Author: " . $feedback->getAuthor();
    echo "Shop: " . $feedback->getShop();
    echo "Grades: " . $feedback->getGrades();
    echo "Order: " . $feedback->getOrder();
    // Получаем итератор по переписке автора отзыва с магазином    
    $comments = $feedback->getComments();
    // Печатаем ответы в переписке    
    echo "Comments:";
    foreach ($comments as $comment) {
        echoComment($comment);
    }    
}
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-feedback-updates.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-feedback-updates.html).

# Ассортимент

Методы клиента `AssortmentClient` возвращают информацию о предложениях и прайс-листах магазина, размещенных на Маркете, а также позволяют изменять настройки прайс-листов.

```php
$assortmentClient = new \Yandex\Market\Partner\Clients\AssortmentClient($clientId, $token);
```

## Предложения магазина

Метод `getOffers` возвращает информацию о предложениях магазина, размещенных на Маркете: 

* фильтровать предложения:

  ```php
  // Получаем предложения магазина в категории «Вентиляторы»
  $offersObject = $assortmentClient->getOffers(10001, 
      ['shopCategoryId' => 90565,]  // идентификатор категории, необязательный параметр
  );
  // Получаем итератор по предложениям
  $offers = $offersObject->getOffers();  
  ```

* искать предложения по заданному поисковому запросу:

  ```php
  // Ищем предложения магазина по запросу «погружной»
  $offersObject = $assortmentClient->getOffers(10001, 
      ['query' => 'погружной',]  // поисковый запрос, необязательный параметр
  );      
  // Получаем итератор по предложениям
  $offers = $offersObject->getOffers();       
  );
  ```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-offers.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-offers.html).

## Все предложения магазина

Метод `getAllOffers` возвращает информацию обо всех предложениях магазина, размещенных на Маркете, в виде сегментов нефиксированного размера:

```php
// Получаем четвертый сегмент всех предложений магазина
$allOffersObject = $assortmentClient->getAllOffers(10001, 
    ['chunk' => 4,]  // номер сегмента, обязательный параметр
);
// Получаем итератор по предложениям
$allOffers = $allOffersObject->getOffers();  
```

Метод содержит в выходных данных [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-offers-all.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-offers-all.html).

## Список прайс-листов магазина

Метод `getFeeds` возвращает список прайс-листов магазина, размещенных на Маркете, и результаты их автоматических проверок:

```php
// Получаем прайс-листы магазина
$feeds = $assortmentClient->getFeeds(10001);  
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-feeds.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-feeds.html).

## Информация о прайс-листе

Метод `getFeed` возвращает информацию о прайс-листе магазина, размещенном на Маркете, и результаты его автоматических проверок:

```php
// Получаем информацию о прайс-листе
$feed = $assortmentClient->getFeed(10001, 12345);  
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-feeds-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-feeds-id.html).

## Категории прайс-листа

Метод `getFeedCategories` возвращает список категорий предложений из прайс-листа магазина, размещенного на Маркете:

```php
// Получаем список категорий прайс-листа
$feedCategories = $assortmentClient->getFeedCategories(10001, 12345);  
```
В ответе на запрос для каждой категории возвращается ее название, идентификатор и идентификатор родительской категории. Список сортируется по возрастанию идентификатора категории. Информация о категориях отключенных прайс-листов не предоставляется.

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-feeds-id-categories.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-feeds-id-categories.html).

## Категории магазина

Метод `getCampaignCategories` возвращает список категорий предложений из всех прайс-листов магазина, размещенных на Маркете:

```php
// Получаем список категорий магазина
$campaignCategories = $assortmentClient->getCampaignCategories(10001);  
```

В ответе на запрос для каждой категории указывается название, ее идентификатор и идентификатор родительской категории. Список сортируется по возрастанию идентификатора категории. Информация о категориях отключенных прайс-листов не предоставляется.

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-feeds-categories.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-feeds-categories.html).

## Отчеты по индексации прайс-листа

Метод `getIndexLogs` возвращает отчеты по индексации прайс-листа магазина:

```php
// Получаем объект с отчетами по индексации
$indexLogsObject = $assortmentClient->getIndexLogs(10001, 12345)->getResult();
// Получаем итератор по отчетам
$indexLogs = $indexLogsObject->getIndexLogRecords();
```

В отчете содержится статистика загрузки прайс-листа и результаты его автоматических проверок. Данные в отчете возвращаются в порядке убывания идентификаторов индексации.

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-feeds-id-index-logs.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-feeds-id-index-logs.html).

## Изменение параметров прайс-листа

Метод `setFeedParams` изменяет параметры прайс-листа:

```php
// Указываем период скачивания прайс-листа 720 минут
$setFeedParamsResponse = $assortmentClient->setFeedParams(10001, 12345, [
    'parameters' => [
        [   
            // Название параметра, обязательный параметр        
            'name' => 'reparseIntervalMinutes',
            // Список значений параметра, обязательный параметр 
            // (если нет параметра deleted)           
            'values' => [720,],
        ],            
]]);
```

Параметры можно сбрасывать к значениям по умолчанию:

```php
// Устанавливаем период скачивания прайс-листа по умолчанию (1440 минут)
$setFeedParamsResponse = $assortmentClient->setFeedParams(10001, 12345, [
    'parameters' => [
        [        
            'name' => 'reparseIntervalMinutes',
            // Удалить ли значение параметра, обязательный параметр
            // (если нет параметра values)                
            'deleted' => true,
        ],            
]]);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-campaigns-id-feeds-id-params.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-feeds-id-params.html).

## Сообщить, что прайс-лист обновился

Метод `refreshFeed` сообщает, что магазин обновил прайс-лист. После этого Маркет начнет обновление данных на сервисе.

```php
// Сообщаем, что прайс-лист обновился
$refreshFeedResponse = $assortmentClient->refreshFeed(10001, 12345);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-campaigns-id-feeds-id-refresh.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-feeds-id-refresh.html).

# Управление показом предложений

Методы клиента `HiddenOffersClient` позволяют управлять показом предложений: скрывать и возобновлять показ на Маркете.

```php
$hiddenOffersClient = new \Yandex\Market\Partner\Clients\HiddenOffersClient($clientId, $token);
```

## Информация о скрытых предложениях

Метод `getInfo` возвращает список скрытых предложений магазина: 

```php
// Получаем объект со скрытыми предложениями
$hiddenOffersObject = $hiddenOffersClient->getInfo(10001);
// Получаем итератор по скрытым предложениям
$hiddenOffers = $hiddenOffersObject->getHiddenOffers();
```

Предложения отсортированы в лексикографическом порядке: сначала по возрастанию идентификаторов прайс-листов, затем по возрастанию идентификаторов предложений.

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-hidden-offers.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-hidden-offers.html).

## Скрытие предложений и настройки скрытия

Метод `hideOffers` позволяет:

* Скрыть предложения магазина на Маркете на указанное время.

  ```php
  // Скрываем предложение
  $hideOffersResponse = $hiddenOffersClient->hideOffers(10001, [
      'hiddenOffers' => [
          [
              // Идентификатор прайс-листа, обязательный параметр
              'feedId' => 67891,
              // Идентификатор предложения, обязательный параметр              
              'offerId' => '101Ab12313C',
          ],
      ],
  ]);
  ```

* Изменить время скрытия предложений и комментарии. Чтобы внести изменения, передайте в теле запроса идентификатор уже скрытого предложения, идентификатор его прайс-листа и новые значения параметров `comment` и `ttlInHours`. При этом предыдущие значения этих параметров будут удалены.  

  ```php
  // Изменяем время скрытия предложения
  $hideOffersResponse = $hiddenOffersClient->hideOffers(10001, [
      'hiddenOffers' => [
          [
              // Идентификатор прайс-листа, обязательный параметр          
              'feedId' => 67891,
              // Идентификатор предложения, обязательный параметр               
              'offerId' => '101Ab12313C',
              // Количество часов до возобновления показа предложения,
              // необязательный параметр              
              'ttlInHours' => 72,
          ],
      ],
  ]);
  ```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-campaigns-id-hidden-offers.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-hidden-offers.html).

## Возобновление показа предложений

Метод `showOffers` возобновляет показ скрытых предложений магазина на Маркете.

```php
// Возобновляем показ предложения
$showOffersResponse = $hiddenOffersClient->showOffers(10001, [
    'hiddenOffers' => [
        [
            // Идентификатор прайс-листа, обязательный параметр
            'feedId' => 67891,
            // Идентификатор предложения, обязательный параметр              
            'offerId' => '101Ab12313C',
        ],
    ],
]);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/delete-campaigns-id-hidden-offers.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/delete-campaigns-id-hidden-offers.html).

# Управление ценами

Методы клиента `PriceClient` позволяют магазину работать с ценами предложений, размещенных на Маркете, без использования прайс-листов.

```php
$priceClient = new \Yandex\Market\Partner\Clients\PriceClient($clientId, $token);
```

## Установка цен на предложения

Метод `updatePrices` устанавливает цены на предложения без использования прайс-листов: 

* Чтобы установить новую цену вместо указанной в прайс-листе, укажите параметр `price`. Цена устанавливается на 30 дней с последнего обновления, после этого снова начнет действовать цена из прайс-листа.

  ```php
  // Устанавливаем цены предложений
  $updatePricesResponse = $priceClient->updatePrices(10001, [
      'offers' => [
          [
              // Идентификатор прайс-листа, обязательный параметр        
              'feed' => ['id' => 12345,],
              // Идентификатор предложения, обязательный параметр            
              'id' => '1636288',
              // Информация о новой цене, обязательный параметр
              // (если нет параметра delete)            
              'price' => [
                  // Новая цена, обязательный параметр            
                  'value' => 1500.00, 
                  // Валюта цены, обязательный параметр                
                  'currencyId' => 'RUR',
              ],
          ],
          [
              'feed' => ['id' => 12345,],
              'id' => '1671008',
              'price' => [
                  'value' => 800.00,
                  // Цена предложения без скидки, необязательный параметр.
                  // Если параметр указан, параметр value означает цену со скидкой
                  'discountBase' => 950.00,
                  'currencyId' => 'RUR',
              ],
          ],            
  ]]);
  ```

* Чтобы удалить цену предложения, установленную через API, укажите параметр `'delete' => true`. После удаления начнет действовать цена из прайс-листа.

  ```php
  // Удаляем цену предложения, установленную через API
  $updatePricesResponse = $priceClient->updatePrices(10001, [
      'offers' => [
          [  
              'feed' => ['id' => 12345,],          
              'id' => '1631602',
              // Удалять ли цену, установленную через API.
              // Обязательный параметр (если нет параметра price)            
              'delete' => true,
          ],
  ]]);
  ```  
  
Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-campaigns-id-offer-prices-updates.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-offer-prices-updates.html).

## Удаление всех цен, установленных через API

Метод `deletePrices` удаляет все цены на предложения, установленные через API. После удаления начнут действовать цены из прайс-листов.

```php
// Удаляем все цены
$deletePricesResponse = $priceClient->deletePrices(10001);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-campaigns-id-offer-prices-removals.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-offer-prices-removals.html).

**_Внимание!_** Передавать в аргументах метода входной параметр `removeAll` не нужно.

## Список цен, установленных через API

Метод `getOfferPrices` возвращает список цен на предложения, установленных через партнерский API.

```php
// Получаем список цен
$offerPrices = $priceClient->getOfferPrices(10001);
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат), но метод `getPager` не реализован, так как ресурс не возвращает информацию о страницах.

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-offer-prices.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-offer-prices.html).

# Обработка заказов

**_Внимание!_** Методы для обработки заказов доступны только для модели DBS (продажи с доставкой продавца).

Для обработки заказов используются два клиента: для запросов от Маркета к магазину и для запросов от магазина к Маркету.

## Запросы от Маркета к магазину

Клиент `OrderProcessingFromMarketClient` передает заказ магазину, запрашивает информацию о товарах в заказе. В ответ магазин отправляет нужные данные и подтверждает принятие заказа.

```php
$OrderProcessingFromMarketClient = new \Yandex\Market\Partner\Clients\OrderProcessingFromMarketClient($clientId, $token);
```

### Информация о товарах в корзине

**_Внимание!_** Запрос отправляет Маркет.

Метод `getCart` декодирует запрос Маркета об актуальной информацию по товарам в корзине:
- наличие товаров;
- опции, даты и интервалы доставки, доступные для указанной корзины товаров и региона;
- доступные способы оплаты.

```php
// Получаем список товаров в корзине
$cart = $OrderProcessingFromMarketClient->getCart($request);

// Печатаем информацию о товарах в корзине
$items = $cart->getItems();
foreach ($items as $item) {
    print_r($item->getFeedId());
    print_r($item->getOfferId());
    print_r($item->getCount());
    print_r($item->getPrice());
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-cart.html).

### Передача заказа и запрос на принятие заказа

**_Внимание!_** Запрос отправляет Маркет.

Метод `acceptOrder` декодирует запрос Маркета на подтверждение нового заказа или отказ от него. 

```php
// Получаем заказ
$order = $OrderProcessingFromMarketClient->acceptOrder($request);

// Печатаем информацию о товарах в корзине
$items = $order->getItems();
foreach ($items as $item) {
   print_r($item);
}
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-order-accept.html).

### Уведомление о смене статуса заказа

**_Внимание!_** Запрос отправляет Маркет.

Метод `orderStatus` декодирует запрос Маркета о смене статуса или подстатуса заказа.

```php
// Получаем заказ
$order = $OrderProcessingFromMarketClient->orderStatus($request);

// Получаем новый статус и подстатус заказа
$orderStatus = $order->getStatus();
$orderSubstatus = $order->getSubstatus();
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-order-status.html).

## Запросы от магазина к Маркету

Клиент `OrderProcessingClient` возвращает информацию о заказах и службах доставки.

```php
$OrderProcessingClient = new \Yandex\Market\Partner\Clients\OrderProcessingClient($clientId, $token);
```

### Изменение статуса заказа

Метод `updateOrderStatus` изменяет статус заказа.

```php
$orderStatus = $OrderProcessingClient->updateOrderStatus(10003, 12345,
    // Информация о заказе. Обязательный параметр   
    ["order" =>
        [
            // Новый статус заказа. Обязательный параметр  
            "status" => "CANCELLED",
            // Причина отмены заказа (для нового статуса CANCELLED). Обязательный параметр      
            "substatus" => "SHOP_FAILED"
        ]
]);
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/put-campaigns-id-orders-id-status.html).

### Информация о заказах

Метод `getOrders` возвращает информацию о нескольких заказах.

```php
// Получаем информацию о запрашиваемых заказах
$ordersObject = $orderProcessingClient->getOrders(10003);

// Получаем итератор по заказам
$orders = $ordersObject->getOrders();
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-orders.html).

### Информация о заказе

Метод `getOrder` возвращает информацию об одном заказе.

```php
// Получаем информацию о запрашиваемом заказе
$order = $orderProcessingClient->getOrder(10003, 12345);

// Печатаем информацию о заказе
$orderCreationDate = $order->getCreationDate(); // Дата оформления заказа
$orderCurrency = $order->getCurrency(); // Валюта, в которой выражены цены товаров в заказе
$orderFake = $order->getFake(); // Тип заказа: настоящий заказ покупателя или отладочный заказ Маркета
$orderId = $order->getId(); // Идентификатор заказа
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-orders-id.html).

### Информация о покупателе

Метод `getBuyer` возвращает информацию о покупателе, который приобрел ваши товары на Маркете.

```php
//Получаем информацию о покупателе
$buyer = $orderProcessingClient->getBuyer(10003, 12345);

// Печатаем информацию о покупателе
$buyerId = $buyer->getId(); // Идентификатор покупателя
$buyerLastName = $buyer->getLastName(); // Фамилия
$buyerFirstName = $buyer->getFirstName(); // Имя
$buyerMiddleName = $buyer->getMiddleName(); // Отчество
$buyerPhone = $buyer->getPhone(); // Номер телефона
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-order-id-buyer.html).

### Справочник служб доставки

Метод `getDeliveryService` возвращает названия и идентификаторы служб доставки.

```php
// Получаем справочник служб доставки
$deliveryServiceObject = $OrderProcessingClient->getDeliveryService();

// Получаем итератор по службам
$deliveryService = $deliveryServiceObject->getDeliveryService();
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-delivery-services.html).

### Передача кодов идентификации товаров

Метод `transferCis` передает Маркету коды идентификации единиц товаров, подлежащих маркировке, из системы «Честный ЗНАК». Коды нужны для того, чтобы Маркет указал их в чеке.

```php
$transferCisResponse = $OrderProcessingClient->transferCis(10003, 12345,
    // Список товаров в заказе, которые подлежат маркировке. Обязательный параметр
    ["items" =>
        [
            // Идентификатор товара. Обязательный параметр
            "id" => 104703,
            // Информация о маркировке единиц товара. Обязательный параметр
            "instances" =>
            [
                // Код идентификации единицы товара в системе «Честный ЗНАК». Обязательный параметр
                "cis" => "010465006531553121CtPoNqNB7qOdc"
            ]
        ]
]);
```

Подробнее см. в документации [партнерского API Маркета для модели DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/put-campaigns-id-orders-id-cis.html).

# Модели товаров

Методы клиента `ModelClient` возвращают информацию о моделях товаров Маркета, а также о предложениях на модели.

```php
$modelClient = new \Yandex\Market\Partner\Clients\ModelClient($clientId, $token);
```

## Информация о модели

Метод `getModelInfo` возвращает информацию о модели товара.

```php
// Получаем информацию об МФУ Epson L3050 в Москве
$modelInfo = $modelClient->getModelInfo(1845642111,
    // Идентификатор региона, обязательный параметр
    ['regionId' => 213,]
);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-models-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-models-id.html).

## Поиск модели товара

Метод `getModelMatch` возвращает информацию о моделях, удовлетворяющих заданным условиям поиска.

```php
// Получаем объект с моделями, найденными по запросу «мойка karcher» 
$modelMatchObject = $modelClient->getModelMatch([
    // Поисковый запрос, обязательный параметр
    'query' => 'мойка karcher',
    // Идентификатор региона, обязательный параметр
    'regionId' => 213,  
]);
// Получаем итератор по моделям
$modelMatch = $modelMatchObject->getModels();
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-models.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-models.html).

## Информация о нескольких моделях

Метод `getModelsInfo` возвращает информацию о моделях товаров.

```php
// Получаем объект с информацией о плитах GEFEST 900 и BEKO FSM 67320 GAS в Москве
$modelsInfoObject = $modelClient->getModelsInfo([
    // Идентификатор региона, обязательный параметр
    'regionId' => 213,
    // Список идентификаторов моделей, обязательный параметр    
    'models' => [7077530, 14018995,],    
]);
// Получаем итератор по моделям
$modelsInfo = $modelsInfoObject->getModels();
```

Метод содержит в выходных данных [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-models.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-models.html).

## Список предложений для модели

Метод `getModelOffers` возвращает информацию о первых десяти предложениях, расположенных на карточке модели.

```php
// Получаем объект с первыми 10 предложениями на смартфон Honor 10 4/128GB
$modelOffersObject = $modelClient->getModelOffers(43052348, [
    // Идентификатор региона, обязательный параметр
    'regionId' => 213,
]);
// Получаем итератор по предложениям
$modelOffers = $modelOffersObject->getOffers();
// Получаем итератор по ценам предложений
$modelOffersPrices = $modelOffersObject->getPrices();
```

Метод содержит в выходных данных [итераторы](Основные-понятия.md#Итераторы) по предложениям и их ценам.

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-models-id-offers.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-models-id-offers.html).

## Список предложений для нескольких моделей

Метод `getModelsOffers` возвращает информацию о первых десяти предложениях, расположенных на карточках моделей, идентификаторы которых указаны в аргументах.

```php
// Получаем объект с первыми 10 предложениями 
// на процессоры Intel Core i5 Coffee Lake и Intel Core i7 Coffee Lake
$modelsOffersObject = $modelClient->getModelsOffers([
    // Идентификатор региона, обязательный параметр
    'regionId' => 213,
    // Список идентификаторов моделей    
    'models' => [1769282505, 1769282498,],   
]);
// Получаем итератор по предложениям
$modelsOffers = $modelsOffersObject->getOffers();
// Получаем итератор по ценам предложений
$modelsOffersPrices = $modelsOffersObject->getPrices();
```

Метод содержит в выходных данных [итераторы](Основные-понятия.md#Итераторы) по предложениям и их ценам.

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-models-offers.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-models-offers.html).

# Управление ставками

**_Внимание!_** Методы для управления ставками доступны только для модели ADV (реклама).

Методы клиента `BidClient` позволяют устанавливать и удалять ставки на предложения на Маркете. 

```php
$bidClient = new \Yandex\Market\Partner\Clients\BidClient($clientId, $token);
```

Подробнее см. раздел [Ставки — повышение стоимости клика](https://yandex.ru/support/partnermarket/auction/placement.html) в Справке Маркета для модели ADV.

Предложения должны указываться в аргументах методов в зависимости от выбранного типа идентификации: по идентификатору (аргументы `feedId` и `offerId`) или по названию (аргумент `offerName`). Тип идентификации предложений выбирается в личном кабинете. Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/rate-methods.html#rate-methods__settings).

## Информация о ставках

Метод `getBids` возвращает информацию об установленных ставках на предложения для магазина. Предложения, для которых нужно получить информацию, указываются в аргументах метода.

```php
// Получаем итератор по установленным ставкам
$bids = $bidClient->getBids(10001, [
    // Список предложений
    'offers' => [
        [
            // Идентификатор прайс-листа, содержащего предложение        
            'feedId' => 12345,
            // Идентификатор предложения в прайс-листе
            'id' => '120',
        ],
        ['feedId' => 12345, 'id' => '121',],
        ['feedId' => 12345, 'id' => '122',],        
]]);
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-auction-bids.html).

## Установка ставок на предложения

Метод `setBids` устанавливает или удаляет ставки на предложения.

**_Внимание!_** Для использования этого метода необходимо, чтобы в личном кабинете в качестве источника информации о ставках был выбран личный кабинет и API. Подробнее см. в [Справке](https://yandex.ru/support/partnermarket/auction/select-and-set.html) Маркета для модели ADV.

```php
// Устанавливаем ставки на два предложения, 
// для третьего запрещаем поднимать ставку до минимального значения,
// для четвертого устанавливаем ставку по умолчанию
$setBidsResponse = $bidClient->setBids(10001, [
    // Список ставок
    'bids' => [
        [
            // Идентификатор прайс-листа, содержащего предложение        
            'feedId' => 12345,
            // Идентификатор предложения в прайс-листе
            'id' => '239982',
            // Общая ставка в условных единицах
            'bid' => 0.22,            
        ],
        [
            'feedId' => 12345, 
            'id' => '239983',
            'bid' => 0.45,
            // Отключить автоматическое повышение ставки bid 
            // до минимального значения
            'dontPullUpBids' => true,            
        ],
        ['feedId' => 12345, 'id' => '239984', 'dontPullUpBids' => true,],
        ['feedId' => 12345, 'id' => '239986', 'bid' => 0,],        
]]);
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы) по установленным ставкам.

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/put-campaigns-id-auction-bids.html).

## Рекомендованные ставки

Метод `getRecommendedBids` возвращает рекомендованные значения ставок на предложения для размещения этих предложений на соответствующих местах.

**_Внимание!_** Возвращаемые ставки являются прогнозируемыми и не гарантируют попадание предложения на указанное место размещения.

* Чтобы получить рекомендованные ставки для размещения на карточках товаров Маркета, укажите во входных данных аргумент `'target' => 'MODEL-CARD'`:

  ```php
  // Получаем итератор по рекомендованным ставкам для карточек товаров
  $recommendedBidsModelCard = $bidClient->getRecommendedBids(10001, [
      // Тип ставки — ставка для размещения на конкретной позиции на карточке товара  
      'target' => 'MODEL-CARD',
      // Список предложений
      'offers' => [
          [
              // Идентификатор прайс-листа, содержащего предложение        
              'feedId' => 12345,
              // Идентификатор предложения в прайс-листе
              'id' => '239982',       
          ],
          ['feedId' => 12345, 'id' => '239983',],     
  ]]);
  ```

  Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-auction-recommendations-bids.html).
  
* Чтобы получить рекомендованные ставки для размещения среди первых 12 предложений магазинов в поиске Маркета, укажите во входных данных аргумент `'target' => 'MARKET-SEARCH'`: 

  ```php
  // Получаем итератор по рекомендованным ставкам для поиска Маркета
  $recommendedBidsMarketSearch = $bidClient->getRecommendedBids(10001, [
      // Тип ставки — ставка  для размещения среди первых 12 предложений магазинов в поиске Маркета  
      'target' => 'MARKET-SEARCH',
      // Список предложений
      'offers' => [
          [
              // Идентификатор прайс-листа, содержащего предложение        
              'feedId' => 12345,
              // Идентификатор предложения в прайс-листе
              'id' => '239982',       
          ],
          ['feedId' => 12345, 'id' => '239983',],     
  ]]);
  ```

  Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-auction-recommendations-bids-market-search.html).
  
* Чтобы получить рекомендованные ставки для размещения предложений в поиске Яндекса, укажите во входных данных аргумент `'target' => 'SEARCH'`:  

  ```php
  // Получаем итератор по рекомендованным ставкам для поиска Яндекса
  $recommendedBidsSearch = $bidClient->getRecommendedBids(10001, [
      // Тип ставки — ставка для размещения в блоке предложений Маркета в поиске Яндекса.  
      'target' => 'SEARCH',
      // Список предложений
      'offers' => [
          [
              // Идентификатор прайс-листа, содержащего предложение        
              'feedId' => 12345,
              // Идентификатор предложения в прайс-листе
              'id' => '239982',       
          ],
          ['feedId' => 12345, 'id' => '239983',],     
  ]]);
  ```

  Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-auction-recommendations-bids-search.html).

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

## Рекомендации по популярным запросам в поиске Маркета

Метод `getPopularRecommendedBidsMarketSearch` возвращает список популярных запросов в поиске Маркета, рекомендованных для предложения, и рекомендованные значения ставок.

**_Внимание!_** Возвращаемые ставки являются прогнозируемыми и не гарантируют попадание предложения на указанное место размещения.

```php
// Получаем итератор по рекомендациям
$popularRecommendedBidsMarketSearch = $bidClient->getPopularRecommendedBidsMarketSearch(10001, [
    // Список предложений
    'offers' => [
        [
            // Идентификатор прайс-листа, содержащего предложение        
            'feedId' => 12345,
            // Идентификатор предложения в прайс-листе
            'id' => '239982',       
        ],
        ['feedId' => 12345, 'id' => '239983',],     
]]);
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-bids-recommended-top-market-search.html).

## Настройки ставок

Метод `getBidsSettings` возвращает информацию о настройках установленных ставок для магазина.

```php
// Получаем настройки ставок
$bidsSettings = $bidClient->getBidsSettings(10001);
```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-bids-settings.html).

# Финансы

**_Внимание!_** Методы, связанные с финансами, доступны только для модели ADV (реклама).

Методы клиента `FinanceClient` возвращают финансовую информацию о размещении магазинов на Маркете.

```php
$financeClient = new \Yandex\Market\Partner\Clients\FinanceClient($clientId, $token);
```

## Баланс магазина и прогноз расходования средств

Метод `getBalance` возвращает актуальный баланс средств магазина, а также прогноз расходования средств и рекомендации по размеру платежа.

```php
// Получаем объект с финансовой информацией о магазине
$balanceObject = $financeClient->getBalance(10001);
// Получаем баланс
$balance = $balanceObject->getBalance();
// Получаем прогнозируемое количество дней, оставшихся до полного израсходования средств
$balanceDaysLeft = $balanceObject->getDaysLeft();
// Получаем рекомендованную сумму платежа
$recommendedPayment = $balanceObject->getRecommendedPayment();
```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-balance.html).

# Статистика

**_Внимание!_** Методы, связанные со статистикой, доступны только для модели ADV (реклама).

Методы клиента `StatisticClient` возвращают статистическую информацию о размещении магазинов на Маркете.

```php
$statisticClient = new \Yandex\Market\Partner\Clients\StatisticClient($clientId, $token);
```

## Базовая статистика

Методы базовой статистики возвращают информацию о кликах, показах и расходе по магазину за запрашиваемый период времени. Максимальный период времени для получения статистики в одном запросе — 180 дней.

* Методы `getMain` и `getDaily` возвращают статистику за каждый день указанного периода.

  ```php
  // Получаем статистику за каждый день с 19 ноября по 22 декабря 2018 года
  $statsDaily = $statisticClient->getMain(10001, [
      // Начальная дата отчетного периода, обязательный параметр
      'fromDate' => '19-11-2018',
      // Конечная дата отчетного периода, необязательный параметр
      'toDate' => '22-12-2018',      
  ]);
  ```

* Метод `getWeekly` возвращает сводную статистику за каждую неделю указанного периода.

  ```php
  // Получаем статистику за каждую неделю с 19 ноября по 22 декабря 2018 года.
  // Возвращаются данные за 5 недель (последняя — неполная, без воскресенья 23 декабря)  
  $statsDaily = $statisticClient->getWeekly(10001, [
      // Начальная дата отчетного периода, обязательный параметр
      'fromDate' => '19-11-2018',
      // Конечная дата отчетного периода, необязательный параметр
      'toDate' => '22-12-2018',      
  ]);
  ```

* Метод `getMonthly` возвращает сводную статистику за каждый месяц указанного периода.

  ```php
  // Получаем сводную статистику:
  // * с 19 по 30 ноября 2018 года;
  // * с 1 по 22 декабря 2018 года 
  $statsDaily = $statisticClient->getMonthly(10001, [
      // Начальная дата отчетного периода, обязательный параметр
      'fromDate' => '19-11-2018',
      // Конечная дата отчетного периода, необязательный параметр
      'toDate' => '22-12-2018',      
  ]);
  ```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-stats-main.html).

## Статистика по предложениям

Метод `getOffersStats` возвращает базовую статистику (клики и расход) по предложениям магазина за запрашиваемый период времени:

```php
// Получаем объект со сводной статистикой по предложениям с 19 ноября по 22 декабря 2018 года
$offersStatsObject = $statisticClient->getOffersStats(10001, [
    // Начальная дата отчетного периода, обязательный параметр
    'fromDate' => '19-11-2018',
    // Конечная дата отчетного периода, необязательный параметр
    'toDate' => '22-12-2018',      
]);
// Получаем итератор по предложениям
$offersStats = $offerStatsObject->getOfferStats();
```

Метод содержит в выходных данных [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-stats-offers.html).

# Геобаза

Методы клиента `GeobaseClient` возвращают информацию о регионах.

```php
$geobaseClient = new \Yandex\Market\Partner\Clients\GeobaseClient($clientId, $token);
```

## Поиск региона

Метод `getRegionsMatch` возвращает информацию о регионе, удовлетворяющем заданным в запросе условиям поиска.

```php
// Получаем итератор по регионам, удовлетворяющим запросу «Астрахань»
$regions = $geobaseClient->getRegionsMatch([
    // Название региона, обязательный параметр.
    // Первая буква должна быть заглавной, остальные — строчными.    
    'name' => 'Астрахань',     
]);
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-regions.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-regions.html).

## Информация о регионе

Метод `getRegion` возвращает информацию о регионе.

```php
// Получаем информацию о Республике Бурятии
$region = $geobaseClient->getRegion(11330);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-regions-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-regions-id.html).

## Информация о дочерних регионах

Метод `getRegionChilds` возвращает информацию о регионах, являющихся дочерними по отношению к указанному региону.

```php
// Получаем объект с дочерними регионами Республики Бурятии
$regionChildrenObject = $geobaseClient->getRegionChilds(11330);
// Получаем итератор по регионам
$regionChildren = $regionChildrenObject->getRegions();
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-regions-id-children.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-regions-id-children.html).

# Точки продаж

Методы клиента `OutletClient` позволяют управлять точками продаж магазина.

```php
$outletClient = new \Yandex\Market\Partner\Clients\OutletClient($clientId, $token);
```

## Информация о точках продаж

Метод `getOutletsInfo` возвращает список точек продаж магазина.

```php
// Получаем объект с точками продаж магазина
$outletsObject = $outletClient->getOutletsInfo(10001);
// Получаем итератор по точкам продаж
$outlets = $outletsObject->getOutlets();
```

Метод возвращает результаты [постранично](Основные-понятия.md#Постраничный-возврат).

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-outlets.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-outlets.html).

## Информация о точке продаж

Метод `getOutletInfo` возвращает информацию о точке продаж магазина.

```php
// Получаем информацию о точке продаж
$outlet = $outletClient->getOutletInfo(10001, 171819);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/get-campaigns-id-outlets-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-outlets-id.html).

## Создание точки продаж

Метод `createOutlet` создает точку продаж магазина на Маркете.

```php
// Создаем точку продаж в Калининграде
$createOutletResponse = $outletClient->createOutlet(10001, [
    // Название точки продаж, обязательный параметр
    'name' => 'На Озерной',
    // Тип точки продаж, обязательный параметр
    'type' => 'DEPOT', // смешанный тип точки продаж (торговый зал и пункт выдачи заказов)
    // Адрес точки продаж, обязательный параметр
    'address' => [
        // Идентификатор региона, обязательный параметр    
        'regionId' => 22,
        // Улица, необязательный параметр        
        'street' => 'ОЗЕРНАЯ',
        // Номер дома, необязательный параметр
        'number' => '20А',
    ],
    // Телефоны точки продаж, обязательный параметр
    'phones' => ['+7 (401) 212-22-32 #123',],
    // Адрес электронной почты точки продаж, обязательный параметр
    'emails' => ['example-shop@yandex.ru'],    
    // Список режимов работы точки продаж, обязательный параметр
    'workingSchedule' => [
        // Список расписаний работы точки продаж, обязательный параметр    
        'scheduleItems' => [
            [
                // День недели, с которого точка продаж работает в указанное время.
                // Обязательный параметр
                'startDay' => 'MONDAY',
                // День недели, по который точка продаж работает в указанное время.
                // Обязательный параметр
                'endDay' => 'FRIDAY',
                // Время, с которого точка продаж работает в указанные дни недели.
                // Обязательный параметр
                'startTime' => '09:00',
                // Время, по которое точка продаж работает в указанные дни недели.
                // Обязательный параметр
                'endTime' => '19:00',
            ],
            [
                'startDay' => 'SATURDAY',
                'endDay' => 'SATURDAY',
                'startTime' => '10:00',
                'endTime' => '16:00',
            ],            
        ],
    // Информация об условиях доставки в точку продаж.
    // Обязательный параметр, если 'type' == 'DEPOT' или 'type' == 'MIXED'    
    'deliveryRules' => [
        [
            // Минимально возможный срок (в рабочих днях) доставки товаров в точку продаж.
            // Обязательный параметр, если 'type' == 'DEPOT' или 'type' == 'MIXED' 
            'minDeliveryDays' => 0,
            // Максимально возможный срок (в рабочих днях) доставки товаров в точку продаж.
            // Необязательный параметр
            'maxDeliveryDays' => 2,
            // Стоимость самовывоза из точки продаж.  
            // Обязательный параметр, если 'type' == 'DEPOT' или 'type' == 'MIXED' 
            'cost' = 285.0,
        ]
    ],        
]);
// Проверяем, что точка продаж создана, и получаем ее идентификатор
if ($createOutletResponse->getStatus() == 'OK')
    $outletId = $createOutletResponse->getResult()['id'];
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/post-campaigns-id-outlets.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-outlets.html).

## Изменение информации о точке продаж

Метод `updateOutlet` изменяет информацию о точке продаж магазина на Маркете.

```php
// Изменяем информацию о точке продаж
$updateOutletResponse = $outletClient->updateOutlet(10001, 171819, [
    // Название точки продаж, обязательный параметр
    'name' => 'На Озерной в начале улицы',
    // Тип точки продаж, обязательный параметр
    'type' => 'DEPOT', // смешанный тип точки продаж (торговый зал и пункт выдачи заказов)
    // Адрес точки продаж, обязательный параметр
    'address' => [
        // Идентификатор региона, обязательный параметр    
        'regionId' => 22,
        // Улица, необязательный параметр        
        'street' => 'ОЗЕРНАЯ',
        // Номер дома, необязательный параметр
        'number' => '20А',
    ],
    // Телефоны точки продаж, обязательный параметр
    'phones' => ['+7 (401) 212-22-32 #123',],
    // Адрес электронной почты точки продаж, обязательный параметр
    'emails' => ['example-shop@yandex.ru'],    
    // Список режимов работы точки продаж, обязательный параметр
    'workingSchedule' => [
        // Список расписаний работы точки продаж, обязательный параметр    
        'scheduleItems' => [
            [
                // День недели, с которого точка продаж работает в указанное время.
                // Обязательный параметр
                'startDay' => 'MONDAY',
                // День недели, по который точка продаж работает в указанное время.
                // Обязательный параметр
                'endDay' => 'FRIDAY',
                // Время, с которого точка продаж работает в указанные дни недели.
                // Обязательный параметр
                'startTime' => '09:00',
                // Время, по которое точка продаж работает в указанные дни недели.
                // Обязательный параметр
                'endTime' => '19:00',
            ],
            [
                'startDay' => 'SATURDAY',
                'endDay' => 'SATURDAY',
                'startTime' => '10:00',
                'endTime' => '18:00',
            ],            
        ],
    // Информация об условиях доставки в точку продаж.
    // Обязательный параметр, если 'type' == 'DEPOT' или 'type' == 'MIXED'    
    'deliveryRules' => [
        [
            // Минимально возможный срок (в рабочих днях) доставки товаров в точку продаж.
            // Обязательный параметр, если 'type' == 'DEPOT' или 'type' == 'MIXED' 
            'minDeliveryDays' => 0,
            // Максимально возможный срок (в рабочих днях) доставки товаров в точку продаж.
            // Необязательный параметр
            'maxDeliveryDays' => 1,
            // Стоимость самовывоза из точки продаж.  
            // Обязательный параметр, если 'type' == 'DEPOT' или 'type' == 'MIXED' 
            'cost' = 300.0,
        ]
    ],        
]);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/put-campaigns-id-outlets-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/put-campaigns-id-outlets-id.html).

## Удаление точки продаж

Метод `deleteOutlet` удаляет точку продаж магазина на Маркете.

```php
// Удаляем точку продаж
$deleteOutletResponse = $outletClient->deleteOutlet(10001, 171819);
```

Подробнее см. в технической документации партнерского API для модели:
- [DBS](https://yandex.ru/dev/market/partner-dsbs/doc/dg/reference/delete-campaigns-id-outlets-id.html);
- [ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/delete-campaigns-id-outlets-id.html).

# Контроль качества

**_Внимание!_** Методы, связанные с контролем качества, доступны только для модели ADV (реклама).

Методы клиента `QualityClient` возвращают информацию об ошибках и проверках магазина службой контроля качества Маркета, а также позволяют сообщить об исправленных ошибках.

```php
$qualityClient = new \Yandex\Market\Partner\Clients\QualityClient($clientId, $token);
```

## Информация об ошибках магазина

Метод `getTickets` возвращает данные о текущих ошибках магазина, выявленных службой контроля качества Маркета.

```php
// Получаем итератор по ошибкам магазина
$tickets = $qualityClient->getTickets(10001);
```

Метод возвращает [итератор](Основные-понятия.md#Итераторы).

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-quality-tickets.html).

## Информация об ошибке магазина

Метод `getTicket` возвращает данные об ошибке магазина, выявленной службой контроля качества Маркета.

```php
// Получаем информацию об ошибке магазина
$ticket = $qualityClient->getTicket(10001, 2799068)->current();
```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-quality-tickets-id.html/).

## Отчет по качеству

Метод `getReport` возвращает [отчет по качеству](https://yandex.ru/support/partnermarket/quality/quality-report.html) работы магазина, составленный службой контроля качества Маркета. Отчет содержит всю информацию о качестве работы вашего магазина, результатах регулярных проверок, выявленных ошибках и проблемах.

```php
// Получаем отчет по качеству
$qualityReport = $qualityClient->getReport(10001);
```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-quality-report.html).

## Сообщить, что ошибка исправлена

Метод `fixError` сообщает службе контроля качества Маркета, что ошибка исправлена.

```php
// Сообщаем, что ошибка исправлена
$fixErrorResponse = $qualityClient->fixError(10001, 2799068);
```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-quality-tickets-id-fix.html).

## Отправить магазин на проверку

Метод `checkCampaign` отправляет отключенный магазин на проверку в службу контроля качества Маркета. Проверка необходима, чтобы перед [повторным подключением магазина](https://yandex.ru/support/partnermarket/quality/reconnection.html) убедиться, что ошибки действительно устранены.

```php
// Отправляем магазин на проверку
$checkCampaignResponse = $qualityClient->checkCampaign(10001);
// Получаем примерное время окончания проверки магазина службой контроля качества
$checkCampaignEstimatedEndTime = $checkCampaignResponse->getEstimatedEndTime();
```

Подробнее см. в документации [партнерского API Маркета для модели ADV](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-quality-check.html).
